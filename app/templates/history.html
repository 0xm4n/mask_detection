{% extends 'navbar.html' %}

{% set active_page = 'history' %}
{% block style %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/history.css') }}">
    <style>
        .nav-tabs > li > a {
            border: 1px solid #ccc;
            border-bottom: 0;
            color: #222;
            font-size: 14px;
            font-weight: 400;
            padding: 7px;

        }

        .tab-pane {
            background: #F5F5F5;
            border: 1px solid #ccc;
            border-radius: 0;
            text-align: center;
            padding: 10px;
        }

        .nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
            background: #f5f5f5;
            border: 1px solid #ccc;
            border-bottom: 0;
            color: #222;
            font-size: 16px;
            font-weight: 600;
            padding: 7px;
        }

    </style>
{% endblock %}

{% block content %}
    <div>

        <div class="container">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item waves-effect waves-light">
                    <a class="nav-link active" id="all-tab" data-toggle="tab" href="#all" role="tab"
                       aria-controls="all"
                       aria-selected="false">ALL</a>
                </li>
                <li class="nav-item waves-effect waves-light">
                    <a class="nav-link" id="list1-tab" data-toggle="tab" href="#list1" role="tab"
                       aria-controls="list1" aria-selected="false">All with masks</a>
                </li>
                <li class="nav-item waves-effect waves-light">
                    <a class="nav-link" id="list2-tab" data-toggle="tab" href="#list2" role="tab"
                       aria-controls="list2" aria-selected="false">Some with masks</a>
                </li>
                <li class="nav-item waves-effect waves-light">
                    <a class="nav-link" id="list3-tab" data-toggle="tab" href="#list3" role="tab"
                       aria-controls="list3" aria-selected="false">None with masks</a>
                </li>
                <li class="nav-item waves-effect waves-light">
                    <a class="nav-link" id="list4-tab" data-toggle="tab" href="#list4" role="tab"
                       aria-controls="list4" aria-selected="false">No faces detected</a>
                </li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane active show" id="all" role="tabpanel" aria-labelledby="all-tab">
                    <div class="row">
                        <div class="col-12">
                            <table class="table table-bordered table-hover ">
                                <thead>
                                <tr>
                                    <th scope="col">Time</th>
                                    <th scope="col">#Faces</th>
                                    <th scope="col">#Masks</th>
                                    <th scope="col">Uploads</th>
                                    <th scope="col">Results</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for photo in all_photos %}
                                    <tr>
                                        <td class="align-middle">{{ photo.created_at }}</td>
                                        <td class="align-middle">{{ photo.nfaces }}</td>
                                        <td class="align-middle">{{ photo.nmasks }}</td>
                                        <td>
                                            <img class="img-thumbnail"
                                                 src="{{ url_for('static', filename='/'.join(['uploads', photo.user_id, photo.photo_name]) ) }}"/>
                                        </td>
                                        <td>
                                            <img class="img-thumbnail"
                                                 src="{{ url_for('static', filename='/'.join(['uploads', photo.user_id, photo.output_name]) ) }}"/>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="list1" role="tabpanel" aria-labelledby="list1-tab">
                    <div class="row">
                        <div class="col-12">
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th scope="col">Time</th>
                                    <th scope="col">#Faces</th>
                                    <th scope="col">#Masks</th>
                                    <th scope="col">Uploads</th>
                                    <th scope="col">Results</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for photo in all_photos %}
                                    {% if photo.photo_type == 1 %}
                                        <tr>
                                            <td class="align-middle">{{ photo.created_at }}</td>
                                            <td class="align-middle">{{ photo.nfaces }}</td>
                                            <td class="align-middle">{{ photo.nmasks }}</td>
                                            <td>
                                                <img class="img-thumbnail"
                                                     src="{{ url_for('static', filename='/'.join(['uploads', photo.user_id, photo.photo_name]) ) }}"/>
                                            </td>
                                            <td>
                                                <img class="img-thumbnail"
                                                     src="{{ url_for('static', filename='/'.join(['uploads', photo.user_id, photo.output_name]) ) }}"/>
                                            </td>
                                        </tr>
                                    {% endif %}
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="list2" role="tabpanel" aria-labelledby="list2-tab">
                    <div class="row">
                        <div class="col-12">
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th scope="col">Time</th>
                                    <th scope="col">#Faces</th>
                                    <th scope="col">#Masks</th>
                                    <th scope="col">Uploads</th>
                                    <th scope="col">Results</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for photo in all_photos %}
                                    {% if photo.photo_type == 2 %}
                                        <tr>
                                            <td class="align-middle">{{ photo.created_at }}</td>
                                            <td class="align-middle">{{ photo.nfaces }}</td>
                                            <td class="align-middle">{{ photo.nmasks }}</td>
                                            <td>
                                                <img src="{{ url_for('static', filename='/'.join(['uploads', photo.user_id, photo.photo_name]) ) }}"/>
                                            </td>
                                            <td>
                                                <img src="{{ url_for('static', filename='/'.join(['uploads', photo.user_id, photo.output_name]) ) }}"/>
                                            </td>
                                        </tr>
                                    {% endif %}
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="list3" role="tabpanel" aria-labelledby="list3-tab">
                    <div class="row">
                        <div class="col-12">
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th scope="col">Time</th>
                                    <th scope="col">#Faces</th>
                                    <th scope="col">#Masks</th>
                                    <th scope="col">Uploads</th>
                                    <th scope="col">Results</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for photo in all_photos %}
                                    {% if photo.photo_type == 0 %}
                                        <tr>
                                            <td class="align-middle">{{ photo.created_at }}</td>
                                            <td class="align-middle">{{ photo.nfaces }}</td>
                                            <td class="align-middle">{{ photo.nmasks }}</td>
                                            <td>
                                                <img class="img-thumbnail"
                                                     src="{{ url_for('static', filename='/'.join(['uploads', photo.user_id, photo.photo_name]) ) }}"/>
                                            </td>
                                            <td>
                                                <img class="img-thumbnail"
                                                     src="{{ url_for('static', filename='/'.join(['uploads', photo.user_id, photo.output_name]) ) }}"/>
                                            </td>
                                        </tr>
                                    {% endif %}
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="list4" role="tabpanel" aria-labelledby="list4-tab">
                    <div class="row">
                        <div class="col-12">
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th scope="col">Time</th>
                                    <th scope="col">#Faces</th>
                                    <th scope="col">#Masks</th>
                                    <th scope="col">Uploads</th>
                                    <th scope="col">Results</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for photo in all_photos %}
                                    {% if photo.photo_type == 3 %}
                                        <tr>
                                            <td class="align-middle">{{ photo.created_at }}</td>
                                            <td class="align-middle">{{ photo.nfaces }}</td>
                                            <td class="align-middle">{{ photo.nmasks }}</td>
                                            <td>
                                                <img class="img-thumbnail"
                                                     src="{{ url_for('static', filename='/'.join(['uploads', photo.user_id, photo.photo_name]) ) }}"/>
                                            </td>
                                            <td>
                                                <img class="img-thumbnail"
                                                     src="{{ url_for('static', filename='/'.join(['uploads', photo.user_id, photo.output_name]) ) }}"/>
                                            </td>
                                        </tr>
                                    {% endif %}
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
{% endblock %}